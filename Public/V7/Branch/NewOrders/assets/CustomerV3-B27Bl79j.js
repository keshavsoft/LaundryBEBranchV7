import{S as D}from"./EntryFile-D68kwv0T.js";import{C as y}from"./Config-kioEcG-G.js";const g=()=>{let e=localStorage.getItem("CustomerNames");if(e===null){document.getElementById("MasterButtonId").click();return}let t=JSON.parse(e),a=document.getElementById("CustomersDataListId");t.forEach(o=>{let r=document.createElement("option");r.value=`${o.CustomerName}:${o.Mobile}`,r.innerHTML=`${o.CustomerName}:${o.Mobile}`,a.appendChild(r)})},O="POST",w={Accept:"application/json","Content-Type":"application/json"},A="",h={method:O,headers:w,body:A},N=()=>{let e=document.getElementById("CustomerNameInputId");console.log(e.value);let a=e.value.replace(/\D/g,""),o={};return o.FindKey="e.CustomerData.CustomerMobile",o.FindValue=a,o};let T=()=>(h.body=JSON.stringify(N()),h);const B="binV4",v="Masters",M="CustomerNames",E={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},R={NewOrderButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItems.html","200Status":"AddItems.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItems.html","200Status":"AddItemsTotalRight.html"}}},u={routePath:B,folderName:v,tableName:M,localStorageKeys:E,Urls:R};let k=async()=>{let e=u.routePath,t=localStorage.getItem("BranchName"),a=T(),o=`/${e}/${t}/Show/FilterDataFromBody`;return await await fetch(o,a)};const V=()=>{let e=y.localStorageKeys.CustomerOrderKey,t=localStorage.getItem(e);return JSON.parse(t)},x=({inOrdersArray:e})=>{let t=y.localStorageKeys.CustomerOrderKey;V()===null&&localStorage.setItem(t,JSON.stringify([])),localStorage.setItem(t,JSON.stringify(e))};let P=e=>{let t=e.JsonData,a=J({inData:t});x({inOrdersArray:a});let o=new Date().toISOString().split("T")[0],n=a.filter(s=>new Date(s.DateTime).toISOString().split("T")[0]===o).sort((s,d)=>s.pk===d.pk?0:s.pk<d.pk?1:-1);var c=$("#table");c.bootstrapTable("load",n),K(),H()},J=({inData:e})=>{let t=e,a=[];return a=t.map(o=>{o.AggValues={},o.AggValues.ItemDetails=`${Object.keys(o.ItemsInOrder).length} / ${Object.values(o.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,o.AggValues.SettlementAmount="",Object.values(o.CheckOutData)[0]&&(o.AggValues.SettlementAmount=Object.values(o.CheckOutData)[0].CardAmount+Object.values(o.CheckOutData)[0].CashAmount+Object.values(o.CheckOutData)[0].UPIAmount,o.IsSettled=!1),Object.keys(o.CheckOutData).length>0&&(o.IsSettled=!0);let r=Object.values(o.AddOnData);return o.AggValues.ItemsArray=Object.values(o.ItemsInOrder).map(n=>(n.AddOnDataAsArray=r.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),o}),a},H=()=>{document.getElementById("ThisWeekRefreshButtonId").click()},K=()=>{document.getElementById("YesterdayRefreshButtonId").click()},U=async()=>{let e=await k();e.status===200&&P(await e.json())};const C=()=>{U()};let z=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",a=>{a.key==="Enter"&&C()})},Y=async()=>{let e=document.getElementById("CustomerNameInputId");if(e.value==="")return e.classList.add("is-invalid"),!1;let t=await W();return console.log("LocalFech:",t),t===!1?(e.classList.add("is-invalid"),!1):!0};const W=async()=>{let t=document.getElementById("CustomerNameInputId").value.split(":")[1],a=`/${u.routePath}/MastersCustomers/Show/Filter/Mobile/${t}`;return(await fetch(a)).status!==500},G="POST",X={Accept:"application/json","Content-Type":"application/json"},q={ItemsInOrder:{},CustomerData:{CustomerName:"",CustomerMobile:""},OrderData:{BranchName:"",Currentdateandtime:""},AddOnData:{},CheckOutData:{}},m={method:G,headers:X,body:q};let Q=()=>{let e=Z(),t=e.split(":")[1],a=e.split(":")[0],o=localStorage.getItem("BranchName");return m.body.CustomerData.CustomerMobile=t,m.body.CustomerData.CustomerName=a,m.body.OrderData.BranchName=o,m.body.OrderData.Currentdateandtime=_(),m.body=JSON.stringify(m.body),m},Z=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()},_=()=>{let e=new Date,t=new Date(e),a=(t.getSeconds()<10?"0":"")+t.getSeconds(),o=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getDate()<10?"0":"")+t.getDate(),c=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1);return`${t.getFullYear()}-${c}-${n} ${r}:${o}:${a}`},tt=async()=>{let e=Q(),t=localStorage.getItem("BranchName"),a=`${u.Urls.NewOrderButtonId.PostFetch}/${t}`;return await await fetch(a,e)},et=()=>{window.location=u.Urls.NewOrderButtonId.RedirectUrl["200Status"]},at=({inresponse:e})=>{Swal.fire({title:"Error Alert",text:`${e}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(t=>{(t.isConfirmed||t.isDismissed)&&(window.location.href=""),t.isDenied&&(window.location.href=u.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},ot=async()=>{let e=await tt();e.status===200&&et(await e.json()),e.status===500&&at({inresponse:await e.text()})};const rt=async()=>{await Y()&&ot()};let lt=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",rt)},nt=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",C)},ct=async()=>{let e=u.routePath,t=u.localStorageKeys.OrderKey,a=`/${e}/MastersCustomers/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},st=async()=>{let e=u.routePath,t=u.localStorageKeys.ItemNamesKey,a=`/${e}/MastersItems/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},dt=async()=>{let e=u.routePath,t=u.localStorageKeys.AddOnsKey,a=`/${e}/MastersAddOns/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},it=()=>{ct().then(()=>{ut()}),st().then(),dt().then(()=>location.reload())};const ut=()=>{let e=localStorage.getItem("CustomerNames");if(e!==null){let t=JSON.parse(e),a=document.getElementById("CustomersDataListId");a.innerHTML="",t.forEach(o=>{let r=document.createElement("option");r.value=`${o.CustomerName}:${o.Mobile}`,r.innerHTML=`${o.CustomerName}:${o.Mobile}`,a.appendChild(r)})}};let mt=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{it()})},ft=()=>{let e=localStorage.getItem("BranchName"),t=document.getElementById("BranchButtonId");t.innerText=e,t.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/login.html"})},Lt=async()=>{let e=document.getElementById("CustomerNameInputId");if(e.value==="")return e.classList.add("is-invalid"),!1;let t=await Ft();return console.log("LocalFech:",t),t===!1?(e.classList.add("is-invalid"),!1):!0};const Ft=async()=>{let t=document.getElementById("CustomerNameInputId").value.split(":")[1],a=`/${u.routePath}/MastersCustomers/Show/Filter/Mobile/${t}`;return(await fetch(a)).status!==500},It="POST",St={Accept:"application/json","Content-Type":"application/json"},$t={ItemsInOrder:{},CustomerData:{CustomerName:"",CustomerMobile:""},OrderData:{BranchName:"",Currentdateandtime:""},AddOnData:{},CheckOutData:{}},f={method:It,headers:St,body:$t};let pt=()=>{let e=jt(),t=e.split(":")[1],a=e.split(":")[0],o=localStorage.getItem("BranchName");return f.body.CustomerData.CustomerMobile=t,f.body.CustomerData.CustomerName=a,f.body.OrderData.BranchName=o,f.body.OrderData.Currentdateandtime=Vt(),f.body=JSON.stringify(f.body),f},jt=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()},Vt=()=>{let e=new Date,t=new Date(e),a=(t.getSeconds()<10?"0":"")+t.getSeconds(),o=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getDate()<10?"0":"")+t.getDate(),c=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1);return`${t.getFullYear()}-${c}-${n} ${r}:${o}:${a}`},gt=async()=>{let e=pt(),t=localStorage.getItem("BranchName"),a=`${u.Urls.AddItemsButtonId.PostFetch}/${t}`;return await await fetch(a,e)},ht=()=>{const e=document.getElementById("AddItemsHtmlId").value;e==="AddRight"?window.location.href="./AddItemsTotalRight.html":e==="AddBottom"&&(window.location.href="./AddItemsButtom.html")},bt=({inresponse:e})=>{Swal.fire({title:"Error Alert",text:`${e}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(t=>{(t.isConfirmed||t.isDismissed)&&(window.location.href=""),t.isDenied&&(window.location.href=u.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},yt=async()=>{let e=await gt();e.status===200&&ht(await e.json()),e.status===500&&bt({inresponse:await e.text()})};const Ct=async()=>{await Lt()&&yt()};let Dt=()=>{document.getElementById("AddItemsButtonId").addEventListener("click",Ct)},Ot=()=>{let e=V(),t=wt(),a=e.filter(r=>new Date(r.DateTime).toLocaleDateString("en-GD")==t);var o=$("#YesterdayTableId");o.bootstrapTable("load",a)};function wt(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()-1),(r=>{const n=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0");return`${String(r.getDate()).padStart(2,"0")}/${c}/${n}`})(t)}let At=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",Ot)},Nt=()=>{let e=V();const t=new Date,a=new Date;a.setDate(t.getDate()-7);const o=e.filter(n=>{const c=new Date(n.DateTime);return c>=a&&c<=t});var r=$("#ThisWeekTableId");r.bootstrapTable("load",o)},Tt=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",Nt)},Bt=()=>{At(),Tt()},vt=()=>{z(),lt(),nt(),mt(),ft(),Dt(),Bt()};const Mt=()=>{let e=b({inGetKey:"CustomerMobile"}),t=b({inGetKey:"CustomerName"});if(e!==null&&t!==null){let a=`${e}:${t}`;Et(a)}};let Et=e=>{let a=document.getElementById("CustomerNameInputId");a!==null&&(a.value=e)},b=({inGetKey:e})=>{const t=window.location.search;return new URLSearchParams(t).get(e)},Rt=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const kt="#toolbar",xt="pk",Pt="true",Jt=[],Ht=!0,Kt="",Ut="",zt="",Yt=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],S={toolbar:kt,idfield:xt,showFooter:Pt,data:Jt,detailView:Ht,onClickRow:Kt,onExpandRow:Ut,icons:zt,columns:Yt};let Wt=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let d=a.html(s).find("table");S.data=o,S.onExpandRow=Rt,d.bootstrapTable(S)};const Gt="bi-plus-circle fs-4",Xt="bi-dash-circle fs-4",qt={detailOpen:Gt,detailClose:Xt},Qt="#toolbar",Zt="pk",_t="true",te=[],ee=!0,ae="",oe="",re="",le=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],L={toolbar:Qt,idfield:Zt,showFooter:_t,data:te,detailView:ee,onClickRow:ae,onExpandRow:oe,icons:re,columns:le};let ne=({inFindColumn:e})=>{e.formatter=ce},ce=(e,t,a)=>a+1,se=({inFindColumn:e})=>{e.footerFormatter=ie,e.formatter=de};const de=(e,t,a)=>e===""?"":`₹ ${e}`;function ie(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const ue=({inFindColumn:e})=>{e.formatter=me},me=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let fe=({inFindColumn:e})=>{e.formatter=Le};function Le(e,t,a){return console.log("row"),[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join("")}let Fe=({inFindColumn:e})=>{e.formatter=Ie,e.footerFormatter=Se};function Ie(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(d=>d.AddOnRate).reduce((d,i)=>d+i,0)*t.Pcs+t.Total:t.Total}function Se(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let $e=({inFindColumn:e})=>{e.formatter=pe};const pe=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let je=({inFindColumn:e})=>{e.footerFormatter=Ve};function Ve(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let ge=({inFindColumn:e})=>{e.formatter=he},he=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),be=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let d=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let i=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&ne({inFindColumn:a}),o!==void 0&&se({inFindColumn:o}),r!==void 0&&ue({inFindColumn:r}),n!==void 0&&fe({inFindColumn:n}),c!==void 0&&Fe({inFindColumn:c}),s!==void 0&&$e({inFindColumn:s}),d!==void 0&&je({inFindColumn:d}),i!==void 0&&ge({inFindColumn:i})};const ye=()=>{var e=$("#table");L.icons=qt,L.onExpandRow=Wt,be({inColumns:L.columns}),e.bootstrapTable(L)};let Ce=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const De="#toolbar",Oe="pk",we="true",Ae=[],Ne=!0,Te="",Be="",ve="",Me=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],p={toolbar:De,idfield:Oe,showFooter:we,data:Ae,detailView:Ne,onClickRow:Te,onExpandRow:Be,icons:ve,columns:Me};let Ee=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let d=a.html(s).find("table");p.data=o,p.onExpandRow=Ce,d.bootstrapTable(p)};const Re="bi-plus-circle fs-4",ke="bi-dash-circle fs-4",xe={detailOpen:Re,detailClose:ke},Pe="#toolbar",Je="pk",He="true",Ke=[],Ue=!0,ze="",Ye="",We="",Ge=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1,class:"d-none d-sm-table-cell"},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],F={toolbar:Pe,idfield:Je,showFooter:He,data:Ke,detailView:Ue,onClickRow:ze,onExpandRow:Ye,icons:We,columns:Ge};let Xe=({inFindColumn:e})=>{e.formatter=qe},qe=(e,t,a)=>a+1,Qe=({inFindColumn:e})=>{e.footerFormatter=_e,e.formatter=Ze};const Ze=(e,t,a)=>e===""?"":`₹ ${e}`;function _e(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const ta=({inFindColumn:e})=>{e.formatter=ea},ea=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let aa=({inFindColumn:e})=>{e.formatter=oa};function oa(e,t,a){return[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join("")}let ra=({inFindColumn:e})=>{e.formatter=la,e.footerFormatter=na};function la(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(d=>d.AddOnRate).reduce((d,i)=>d+i,0)*t.Pcs+t.Total:t.Total}function na(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let ca=({inFindColumn:e})=>{e.formatter=sa};const sa=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let da=({inFindColumn:e})=>{e.footerFormatter=ia};function ia(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let ua=({inFindColumn:e})=>{e.formatter=ma},ma=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),fa=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let d=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let i=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&Xe({inFindColumn:a}),o!==void 0&&Qe({inFindColumn:o}),r!==void 0&&ta({inFindColumn:r}),n!==void 0&&aa({inFindColumn:n}),c!==void 0&&ra({inFindColumn:c}),s!==void 0&&ca({inFindColumn:s}),d!==void 0&&da({inFindColumn:d}),i!==void 0&&ua({inFindColumn:i})};const La="YesterdayTableId",Fa=()=>{var e=$(`#${La}`);F.icons=xe,F.onExpandRow=Ee,fa({inColumns:F.columns}),e.bootstrapTable(F)};let Ia=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const Sa="#toolbar",$a="pk",pa="true",ja=[],Va=!0,ga="",ha="",ba="",ya=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],j={toolbar:Sa,idfield:$a,showFooter:pa,data:ja,detailView:Va,onClickRow:ga,onExpandRow:ha,icons:ba,columns:ya};let Ca=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let d=a.html(s).find("table");j.data=o,j.onExpandRow=Ia,d.bootstrapTable(j)};const Da="bi-plus-circle fs-4",Oa="bi-dash-circle fs-4",wa={detailOpen:Da,detailClose:Oa},Aa="#toolbar",Na="pk",Ta="true",Ba=[],va=!0,Ma="",Ea="",Ra="",ka=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:Aa,idfield:Na,showFooter:Ta,data:Ba,detailView:va,onClickRow:Ma,onExpandRow:Ea,icons:Ra,columns:ka};let xa=({inFindColumn:e})=>{e.formatter=Pa},Pa=(e,t,a)=>a+1,Ja=({inFindColumn:e})=>{e.footerFormatter=Ka,e.formatter=Ha};const Ha=(e,t,a)=>e===""?"":`₹ ${e}`;function Ka(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const Ua=({inFindColumn:e})=>{e.formatter=za},za=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let Ya=({inFindColumn:e})=>{e.formatter=Wa};function Wa(e,t,a){return[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join("")}let Ga=({inFindColumn:e})=>{e.formatter=Xa,e.footerFormatter=qa};function Xa(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(d=>d.AddOnRate).reduce((d,i)=>d+i,0)*t.Pcs+t.Total:t.Total}function qa(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let Qa=({inFindColumn:e})=>{e.formatter=Za};const Za=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let _a=({inFindColumn:e})=>{e.footerFormatter=to};function to(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let eo=({inFindColumn:e})=>{e.formatter=ao},ao=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),oo=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let d=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let i=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&xa({inFindColumn:a}),o!==void 0&&Ja({inFindColumn:o}),r!==void 0&&Ua({inFindColumn:r}),n!==void 0&&Ya({inFindColumn:n}),c!==void 0&&Ga({inFindColumn:c}),s!==void 0&&Qa({inFindColumn:s}),d!==void 0&&_a({inFindColumn:d}),i!==void 0&&eo({inFindColumn:i})};const ro="ThisWeekTableId",lo=()=>{var e=$(`#${ro}`);I.icons=wa,I.onExpandRow=Ca,oo({inColumns:I.columns}),e.bootstrapTable(I)},no=()=>{Fa(),lo()},co=()=>{no(),ye(),vt(),Mt(),so()};let so=()=>{if(io()!==""){var e=document.getElementById("CustomerNameSearchButtonId"),t=new Event("click");e.dispatchEvent(t)}},io=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()};const uo=async()=>{if(co(),D({inSuccessFunc:g})===!1)return await!1;g()};uo().then();
