import{S as D}from"./EntryFile-D68kwv0T.js";import{C as y}from"./Config-kioEcG-G.js";const g=()=>{let e=localStorage.getItem("CustomerNames");if(e===null){document.getElementById("MasterButtonId").click();return}let t=JSON.parse(e),a=document.getElementById("CustomersDataListId");t.forEach(o=>{let r=document.createElement("option");r.value=`${o.CustomerName}:${o.Mobile}`,r.innerHTML=`${o.CustomerName}:${o.Mobile}`,a.appendChild(r)})},O="POST",w={Accept:"application/json","Content-Type":"application/json"},A="",C={method:O,headers:w,body:A},T=()=>{let e=document.getElementById("CustomerNameInputId");console.log(e.value);let a=e.value.replace(/\D/g,""),o={};return o.FindKey="e.CustomerData.CustomerMobile",o.FindValue=a,o};let N=()=>(C.body=JSON.stringify(T()),C);const B="binV4",v="Masters",R="CustomerNames",M={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},E={NewOrderButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItems.html","200Status":"AddItems.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItems.html","200Status":"AddItemsTotalRight.html"}}},u={routePath:B,folderName:v,tableName:R,localStorageKeys:M,Urls:E};let k=async()=>{let e=u.routePath,t=localStorage.getItem("BranchName"),a=N(),o=`/${e}/${t}/Show/FilterDataFromBody`;return await await fetch(o,a)};const h=()=>{let e=y.localStorageKeys.CustomerOrderKey,t=localStorage.getItem(e);return JSON.parse(t)},x=({inOrdersArray:e})=>{let t=y.localStorageKeys.CustomerOrderKey;h()===null&&localStorage.setItem(t,JSON.stringify([])),localStorage.setItem(t,JSON.stringify(e))};let P=e=>{let t=e.JsonData,a=J({inData:t});x({inOrdersArray:a});let o=new Date().toISOString().split("T")[0],n=a.filter(s=>new Date(s.DateTime).toISOString().split("T")[0]===o).sort((s,i)=>s.pk===i.pk?0:s.pk<i.pk?1:-1);var c=$("#table");c.bootstrapTable("load",n),K(),H()},J=({inData:e})=>{let t=e,a=[];return a=t.map(o=>{o.AggValues={},o.AggValues.ItemDetails=`${Object.keys(o.ItemsInOrder).length} / ${Object.values(o.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,o.AggValues.SettlementAmount="",Object.values(o.CheckOutData)[0]&&(o.AggValues.SettlementAmount=Object.values(o.CheckOutData)[0].CardAmount+Object.values(o.CheckOutData)[0].CashAmount+Object.values(o.CheckOutData)[0].UPIAmount,o.IsSettled=!1),Object.keys(o.CheckOutData).length>0&&(o.IsSettled=!0);let r=Object.values(o.AddOnData);return o.AggValues.ItemsArray=Object.values(o.ItemsInOrder).map(n=>(n.AddOnDataAsArray=r.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),o}),a},H=()=>{document.getElementById("ThisWeekRefreshButtonId").click()},K=()=>{document.getElementById("YesterdayRefreshButtonId").click()},U=async()=>{let e=await k();e.status===200&&P(await e.json())};const V=()=>{U()};let z=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",a=>{a.key==="Enter"&&V()})},Y=async()=>{let e=document.getElementById("CustomerNameInputId");if(e.value==="")return e.classList.add("is-invalid"),!1;let t=await W();return console.log("LocalFech:",t),t===!1?(e.classList.add("is-invalid"),!1):!0};const W=async()=>{let t=document.getElementById("CustomerNameInputId").value.split(":")[1],a=`/${u.routePath}/MastersCustomers/Show/Filter/Mobile/${t}`;return(await fetch(a)).status!==500},G="POST",X={Accept:"application/json","Content-Type":"application/json"},q={ItemsInOrder:{},CustomerData:{CustomerName:"",CustomerMobile:""},OrderData:{BranchName:"",Currentdateandtime:""},AddOnData:{},CheckOutData:{}},m={method:G,headers:X,body:q};let Q=()=>{let e=Z(),t=e.split(":")[1],a=e.split(":")[0],o=localStorage.getItem("BranchName");return m.body.CustomerData.CustomerMobile=t,m.body.CustomerData.CustomerName=a,m.body.OrderData.BranchName=o,m.body.OrderData.Currentdateandtime=_(),m.body=JSON.stringify(m.body),m},Z=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()},_=()=>{let e=new Date,t=new Date(e),a=(t.getSeconds()<10?"0":"")+t.getSeconds(),o=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getDate()<10?"0":"")+t.getDate(),c=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1);return`${t.getFullYear()}-${c}-${n} ${r}:${o}:${a}`},tt=async()=>{let e=Q(),t=localStorage.getItem("BranchName"),a=`${u.Urls.NewOrderButtonId.PostFetch}/${t}`;return await await fetch(a,e)},et=()=>{window.location=u.Urls.NewOrderButtonId.RedirectUrl["200Status"]},at=({inresponse:e})=>{Swal.fire({title:"Error Alert",text:`${e}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(t=>{(t.isConfirmed||t.isDismissed)&&(window.location.href=""),t.isDenied&&(window.location.href=u.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},ot=async()=>{let e=await tt();e.status===200&&et(await e.json()),e.status===500&&at({inresponse:await e.text()})};const rt=async()=>{await Y()&&ot()};let lt=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",rt)},nt=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",V)},ct=async()=>{let e=u.routePath,t=u.localStorageKeys.OrderKey,a=`/${e}/MastersCustomers/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},st=async()=>{let e=u.routePath,t=u.localStorageKeys.ItemNamesKey,a=`/${e}/MastersItems/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},it=async()=>{let e=u.routePath,t=u.localStorageKeys.AddOnsKey,a=`/${e}/MastersAddOns/Show/DataOnly`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},dt=()=>{ct().then(()=>{ut()}),st().then(),it().then(()=>location.reload())};const ut=()=>{let e=localStorage.getItem("CustomerNames");if(e!==null){let t=JSON.parse(e),a=document.getElementById("CustomersDataListId");a.innerHTML="",t.forEach(o=>{let r=document.createElement("option");r.value=`${o.CustomerName}:${o.Mobile}`,r.innerHTML=`${o.CustomerName}:${o.Mobile}`,a.appendChild(r)})}};let mt=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{dt()})},ft=()=>{let e=localStorage.getItem("BranchName"),t=document.getElementById("BranchButtonId");t.innerText=e,t.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/login.html"})},Lt=async()=>{let e=document.getElementById("CustomerNameInputId");if(e.value==="")return e.classList.add("is-invalid"),!1;let t=await Ft();return console.log("LocalFech:",t),t===!1?(e.classList.add("is-invalid"),!1):!0};const Ft=async()=>{let t=document.getElementById("CustomerNameInputId").value.split(":")[1],a=`/${u.routePath}/MastersCustomers/Show/Filter/Mobile/${t}`;return(await fetch(a)).status!==500},It="POST",St={Accept:"application/json","Content-Type":"application/json"},$t={ItemsInOrder:{},CustomerData:{CustomerName:"",CustomerMobile:""},OrderData:{BranchName:"",Currentdateandtime:""},AddOnData:{},CheckOutData:{}},f={method:It,headers:St,body:$t};let pt=()=>{let e=jt(),t=e.split(":")[1],a=e.split(":")[0],o=localStorage.getItem("BranchName");return f.body.CustomerData.CustomerMobile=t,f.body.CustomerData.CustomerName=a,f.body.OrderData.BranchName=o,f.body.OrderData.Currentdateandtime=ht(),f.body=JSON.stringify(f.body),f},jt=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()},ht=()=>{let e=new Date,t=new Date(e),a=(t.getSeconds()<10?"0":"")+t.getSeconds(),o=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getDate()<10?"0":"")+t.getDate(),c=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1);return`${t.getFullYear()}-${c}-${n} ${r}:${o}:${a}`},Vt=async()=>{let e=pt(),t=localStorage.getItem("BranchName"),a=`${u.Urls.AddItemsButtonId.PostFetch}/${t}`;return await await fetch(a,e)},gt=()=>{const e=document.getElementById("AddItemsHtmlId").value;e==="AddRight"?window.location.href="./AddItemsTotalRight.html":e==="AddBottom"&&(window.location.href="./AddItemsButtom.html")},Ct=({inresponse:e})=>{Swal.fire({title:"Error Alert",text:`${e}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(t=>{(t.isConfirmed||t.isDismissed)&&(window.location.href=""),t.isDenied&&(window.location.href=u.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},bt=async()=>{let e=await Vt();e.status===200&&gt(await e.json()),e.status===500&&Ct({inresponse:await e.text()})};const yt=async()=>{await Lt()&&bt()};let Dt=()=>{document.getElementById("AddItemsButtonId").addEventListener("click",yt)},Ot=()=>{let e=h(),t=wt(),a=e.filter(r=>new Date(r.DateTime).toLocaleDateString("en-GD")==t);var o=$("#YesterdayTableId");o.bootstrapTable("load",a)};function wt(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()-1),(r=>{const n=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0");return`${String(r.getDate()).padStart(2,"0")}/${c}/${n}`})(t)}let At=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",Ot)},Tt=()=>{let e=h();const t=new Date,a=new Date;a.setDate(t.getDate()-7);const o=e.filter(n=>{const c=new Date(n.DateTime);return c>=a&&c<=t});var r=$("#ThisWeekTableId");r.bootstrapTable("load",o)},Nt=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",Tt)},Bt=()=>{At(),Nt()},vt=()=>{z(),lt(),nt(),mt(),ft(),Dt(),Bt()};const Rt=()=>{let e=b({inGetKey:"CustomerMobile"}),t=b({inGetKey:"CustomerName"});if(e!==null&&t!==null){let a=`${t}:${e}`;Mt(a)}};let Mt=e=>{let a=document.getElementById("CustomerNameInputId");a!==null&&(a.value=e)},b=({inGetKey:e})=>{const t=window.location.search;return new URLSearchParams(t).get(e)},Et=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const kt="#toolbar",xt="pk",Pt="true",Jt=[],Ht=!0,Kt="",Ut="",zt="",Yt=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],S={toolbar:kt,idfield:xt,showFooter:Pt,data:Jt,detailView:Ht,onClickRow:Kt,onExpandRow:Ut,icons:zt,columns:Yt};let Wt=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=a.html(s).find("table");S.data=o,S.onExpandRow=Et,i.bootstrapTable(S)};const Gt="bi-plus-circle fs-4",Xt="bi-dash-circle fs-4",qt={detailOpen:Gt,detailClose:Xt},Qt="#toolbar",Zt="pk",_t="true",te=[],ee=!0,ae="",oe="",re="",le=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],L={toolbar:Qt,idfield:Zt,showFooter:_t,data:te,detailView:ee,onClickRow:ae,onExpandRow:oe,icons:re,columns:le};let ne=async({inFromFetch:e})=>{e.KTF===!1?Swal.fire({icon:"warning",text:e.KReason}):V()};const ce=async({inRowData:e})=>{let t=e.pk,o=`/Custom/Cleaning/Branch/Today/Orders/${localStorage.getItem("BranchName")}/${t}`,c=await(await fetch(o,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return ne({inFromFetch:c}),c};let se=async({inRowData:e})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(t=>{t.isConfirmed&&ce({inRowData:e}).then(a=>{})})};const ie=(e,t,a)=>{a==="Opts"&&(e.IsSettled||se({inRowData:e}))};let de=({inFindColumn:e})=>{e.formatter=ue},ue=(e,t,a)=>a+1,me=({inFindColumn:e})=>{e.footerFormatter=Le,e.formatter=fe};const fe=(e,t,a)=>e===""?"":`₹ ${e}`;function Le(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const Fe=({inFindColumn:e})=>{e.formatter=Ie},Ie=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let Se=({inFindColumn:e})=>{e.formatter=$e};function $e(e,t,a){return t.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let pe=({inFindColumn:e})=>{e.formatter=je,e.footerFormatter=he};function je(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*t.Pcs+t.Total:t.Total}function he(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let Ve=({inFindColumn:e})=>{e.formatter=ge};const ge=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let Ce=({inFindColumn:e})=>{e.footerFormatter=be};function be(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let ye=({inFindColumn:e})=>{e.formatter=De},De=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),Oe=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let i=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let d=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&de({inFindColumn:a}),o!==void 0&&me({inFindColumn:o}),r!==void 0&&Fe({inFindColumn:r}),n!==void 0&&Se({inFindColumn:n}),c!==void 0&&pe({inFindColumn:c}),s!==void 0&&Ve({inFindColumn:s}),i!==void 0&&Ce({inFindColumn:i}),d!==void 0&&ye({inFindColumn:d})};const we=()=>{var e=$("#table");L.icons=qt,L.onExpandRow=Wt,L.onClickRow=ie,Oe({inColumns:L.columns}),e.bootstrapTable(L)};let Ae=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const Te="#toolbar",Ne="pk",Be="true",ve=[],Re=!0,Me="",Ee="",ke="",xe=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],p={toolbar:Te,idfield:Ne,showFooter:Be,data:ve,detailView:Re,onClickRow:Me,onExpandRow:Ee,icons:ke,columns:xe};let Pe=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=a.html(s).find("table");p.data=o,p.onExpandRow=Ae,i.bootstrapTable(p)};const Je="bi-plus-circle fs-4",He="bi-dash-circle fs-4",Ke={detailOpen:Je,detailClose:He},Ue="#toolbar",ze="pk",Ye="true",We=[],Ge=!0,Xe="",qe="",Qe="",Ze=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1,class:"d-none d-sm-table-cell"},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],F={toolbar:Ue,idfield:ze,showFooter:Ye,data:We,detailView:Ge,onClickRow:Xe,onExpandRow:qe,icons:Qe,columns:Ze};let _e=({inFindColumn:e})=>{e.formatter=ta},ta=(e,t,a)=>a+1,ea=({inFindColumn:e})=>{e.footerFormatter=oa,e.formatter=aa};const aa=(e,t,a)=>e===""?"":`₹ ${e}`;function oa(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const ra=({inFindColumn:e})=>{e.formatter=la},la=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let na=({inFindColumn:e})=>{e.formatter=ca};function ca(e,t,a){return[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join("")}let sa=({inFindColumn:e})=>{e.formatter=ia,e.footerFormatter=da};function ia(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*t.Pcs+t.Total:t.Total}function da(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let ua=({inFindColumn:e})=>{e.formatter=ma};const ma=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let fa=({inFindColumn:e})=>{e.footerFormatter=La};function La(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let Fa=({inFindColumn:e})=>{e.formatter=Ia},Ia=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),Sa=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let i=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let d=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&_e({inFindColumn:a}),o!==void 0&&ea({inFindColumn:o}),r!==void 0&&ra({inFindColumn:r}),n!==void 0&&na({inFindColumn:n}),c!==void 0&&sa({inFindColumn:c}),s!==void 0&&ua({inFindColumn:s}),i!==void 0&&fa({inFindColumn:i}),d!==void 0&&Fa({inFindColumn:d})};const $a="YesterdayTableId",pa=()=>{var e=$(`#${$a}`);F.icons=Ke,F.onExpandRow=Pe,Sa({inColumns:F.columns}),e.bootstrapTable(F)};let ja=(e,t,a)=>{let o=t.AddOnDataAsArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);a.html(s).find("table").bootstrapTable({data:o})};const ha="#toolbar",Va="pk",ga="true",Ca=[],ba=!0,ya="",Da="",Oa="",wa=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],j={toolbar:ha,idfield:Va,showFooter:ga,data:Ca,detailView:ba,onClickRow:ya,onExpandRow:Da,icons:Oa,columns:wa};let Aa=(e,t,a)=>{let o=t.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=a.html(s).find("table");j.data=o,j.onExpandRow=ja,i.bootstrapTable(j)};const Ta="bi-plus-circle fs-4",Na="bi-dash-circle fs-4",Ba={detailOpen:Ta,detailClose:Na},va="#toolbar",Ra="pk",Ma="true",Ea=[],ka=!0,xa="",Pa="",Ja="",Ha=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled"},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:va,idfield:Ra,showFooter:Ma,data:Ea,detailView:ka,onClickRow:xa,onExpandRow:Pa,icons:Ja,columns:Ha};let Ka=({inFindColumn:e})=>{e.formatter=Ua},Ua=(e,t,a)=>a+1,za=({inFindColumn:e})=>{e.footerFormatter=Wa,e.formatter=Ya};const Ya=(e,t,a)=>e===""?"":`₹ ${e}`;function Wa(e){return console.log("data : ",e),"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,a){return t+a},0)}const Ga=({inFindColumn:e})=>{e.formatter=Xa},Xa=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const o=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${o}</a>`}return"No"};let qa=({inFindColumn:e})=>{e.formatter=Qa};function Qa(e,t,a){return[`<a href="./ExitOrderItems.html?OrderNumber=${t.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join("")}let Za=({inFindColumn:e})=>{e.formatter=_a,e.footerFormatter=to};function _a(e,t,a){let o=localStorage.getItem("PresentOrder"),r=JSON.parse(o),n=t.ItemSerial,c=Object.values(r.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*t.Pcs+t.Total:t.Total}function to(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let eo=({inFindColumn:e})=>{e.formatter=ao};const ao=e=>{if(e===void 0)return"";var t=new Date-new Date(e),a=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.round(t%864e5%36e5/6e4);return a+" days, "+o+" hours, "+r+" min..."};let oo=({inFindColumn:e})=>{e.footerFormatter=ro};function ro(e){var t=this.field;return e.map(function(o){return o[t]===void 0?0:+o[t]}).reduce(function(o,r){return o+r},0).toFixed(0)}let lo=({inFindColumn:e})=>{e.formatter=no},no=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),co=({inColumns:e})=>{let t=e,a=t.find(l=>l.field==="KS-Serial"),o=t.find(l=>l.field==="AggValues.SettlementAmount"),r=t.find(l=>l.field==="KS-AddOns"),n=t.find(l=>l.field==="Opts"),c=t.find(l=>l.field==="KS-Amount"),s=t.find(l=>l.field==="DateTime");t.find(l=>l.field==="ItemName");let i=t.find(l=>l.field==="Pcs");t.find(l=>l.field==="location");let d=t.find(l=>l.field==="DeliveryDateTime");t.find(l=>l.field==="ItemService"),a!==void 0&&Ka({inFindColumn:a}),o!==void 0&&za({inFindColumn:o}),r!==void 0&&Ga({inFindColumn:r}),n!==void 0&&qa({inFindColumn:n}),c!==void 0&&Za({inFindColumn:c}),s!==void 0&&eo({inFindColumn:s}),i!==void 0&&oo({inFindColumn:i}),d!==void 0&&lo({inFindColumn:d})};const so="ThisWeekTableId",io=()=>{var e=$(`#${so}`);I.icons=Ba,I.onExpandRow=Aa,co({inColumns:I.columns}),e.bootstrapTable(I)},uo=()=>{pa(),io()},mo=()=>{uo(),we(),vt(),Rt(),fo()};let fo=()=>{if(Lo()!==""){var e=document.getElementById("CustomerNameSearchButtonId"),t=new Event("click");e.dispatchEvent(t)}},Lo=()=>{let t=document.getElementById("CustomerNameInputId");if(t!==null)return t.value.trim()};const Fo=async()=>{if(mo(),D({inSuccessFunc:g})===!1)return await!1;g()};Fo().then();
