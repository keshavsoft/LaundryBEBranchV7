var R=Object.defineProperty,E=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var T=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,j=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&T(e,a,t[a]);if(b)for(var a of b(t))K.call(t,a)&&T(e,a,t[a]);return e},F=(e,t)=>E(e,w(t));import{S as M}from"./EntryFile-D68kwv0T.js";let H=()=>{P()},P=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=J(),l=k();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},J=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},k=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},U=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",H)};const x=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let q=()=>{x()&&G()},G=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=W();t.searchParams.append("OrderNumber",a),window.location.href=t.href},W=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},_=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",q)},z=()=>{U(),_()},Q=()=>!(X()===!1||Y()===!1||Z()===!1||ee()===!1||te()===!1||ae()===!1||le()===!1);const X=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Y=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Z=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ee=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},te=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ae=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},le=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},oe="POST",re={Accept:"application/json","Content-Type":"application/json"},ne="",p={method:oe,headers:re,body:ne},de="binV4",ce="Transactions",me="Kakinada",se={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},ue={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId/:AddOnKey",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId",AlterGetUrl:"/Custom/Cleaning/Branch/Order/SubTable/ItemsInOrder/:Id/:SubId/$tableName"}},ie={AddOnModal:"AddOnModal"},s={routePath:de,folderName:ce,tableName:me,localStorageKeys:se,ApiUrls:ue,ModalIds:ie};let Ie=({inCategory:e,inItemType:t})=>{let a=s.localStorageKeys.ItemNamesKey,l=localStorage.getItem(a);return JSON.parse(l).filter(n=>n.Category===e&&n.ItemType===t)},h=({inCategory:e,inItemType:t,inService:a})=>{let l=s.localStorageKeys.ItemNamesKey,o=localStorage.getItem(l);return JSON.parse(o).find(c=>c.Category===e&&c.ItemType===t&&c.Service===a)},Le=()=>{let e=s.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const je=()=>{let e=fe(),t=Se(),a=Ve(),l=ge(),o=be(),r=ye(),n=Oe();const c=Fe();localStorage.setItem("DeliveryDateTime",JSON.stringify(n));let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const d=h({inCategory:e,inItemType:t,inService:c});let m={};return m.Category=e,m.ItemName=d.ItemName,m.ItemType=t,m.Rate=a,m.Pcs=l,m.Total=o,m.location=r,m.DeliveryDateTime=n,m.ItemService=c,m.AddOnArray=u,m};let Fe=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},fe=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Se=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ve=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},ge=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},ye=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Oe=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},be=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId"),o=JSON.parse(localStorage.getItem("PresentOrderAddOns")),r=o!==null?o.map(c=>c.AddOnRate).reduce((c,u)=>c+parseInt(u),0):0,n=parseInt(t.value)+r;return console.log("Total:",n*l.value),n*l.value},Te=()=>(p.body=JSON.stringify(je()),p),pe=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=Te(),l=`/${s.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},S=async()=>{let e=localStorage.getItem("BranchName"),t=s.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))};const Ae=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return ve({inItemsObject:a.ItemsInOrder})},ve=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>F(j({},l),{pk:a})),V=()=>{let e=Ae();var t=$("#table");t.bootstrapTable("load",e)};let $e=()=>{he(),C()},he=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const C=()=>{const e=new Date,t=e.toISOString().split("T")[0];e.setDate(e.getDate()+7);const a=e.toISOString().split("T")[0],l=document.getElementById("TableFooterdateInputId");let o=JSON.parse(localStorage.getItem("DeliveryDateTime"));l&&(o!==null?(l.value=o,l.setAttribute("min",t)):(l.value=a,l.setAttribute("min",t)))};let Ce=()=>{S().then(()=>{V(),localStorage.removeItem("PresentOrderAddOns"),$("#table").bootstrapTable("refresh"),$("#AddItemsId")[0].reset(),$("#TableFooterItemNameId").focus(),C(),localStorage.setItem("PresentOrderAddOns",JSON.stringify([]))})},Ne=async()=>{(await pe()).status===200&&Ce()};const Be=()=>{Q()&&Ne()};let Re=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",Be)};const Ee=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=Le().filter(i=>i.Category===l);const n=Object.groupBy(r,({ItemType:i})=>i);let u=Object.keys(n).map(i=>i).sort((i,I)=>i==I?0:i>I?1:-1);for(var d="",m=0;m<u.length;m++)d+=`<option value="${u[m]}">${u[m]}</option>`;a.innerHTML=d},we=e=>{let a=e.currentTarget.value;Ee({inCategorySelected:a})};let De=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",we)};const N="TableFooterItemServiceId",Ke=e=>{let a=e.currentTarget.value;const l=Me();let o=document.getElementById(N),r=Ie({inCategory:l,inItemType:a});const n=Object.groupBy(r,({Service:i})=>i);let u=Object.keys(n).map(i=>i).sort((i,I)=>i==I?0:i>I?1:-1);for(var d="",m=0;m<u.length;m++)d+=`<option value="${u[m]}">${u[m]}</option>`;o.innerHTML=d,He()};let Me=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},He=()=>{var e=new Event("change");let t=document.getElementById(N);t!==null&&t.dispatchEvent(e)},Pe=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",Ke)};const A=(e,t,a)=>{Je(e.ItemName),ke(e.Category),Ue(e.DryWashRate),xe(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let Je=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},ke=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Ue=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},xe=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const qe=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:jFLocalFromLocalStorageWithFilter(e),onClickRow:A}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:jFLocalFromLocalStorage(),onClickRow:A}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},Ge=()=>{let e=document.getElementById("TableFooterItemNameId").value;qe(e)};let We=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Ge)},y=document.getElementById("AddOnModalLocalStorage"),_e=({inRow:e})=>{const t=ze(),a=Qe(),l=Xe();Ye(t),Ze(a),et(l)},ze=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Qe=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Xe=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},Ye=e=>{const t=y.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},Ze=e=>{const t=y.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)},et=e=>{const t=y.querySelector(".AddOnModalLocalStorageSerialClass");t!==null&&(t.value=e)};const tt=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},at="AddOnModalLocalStorageTable",O=()=>{let e=tt();var t=$(`#${at}`);t.bootstrapTable("load",e===null?[]:e)},lt="AddOnModalLocalStorage",ot=({inRow:e})=>{O();let t=document.getElementById(lt);_e({inRow:e}),$(t).modal("show")};let rt=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",ot)};const nt=e=>{let a=e.currentTarget.value;const l=ct(),o=dt();let r=h({inCategory:l,inItemType:o,inService:a});mt(r.DryWashRate)};let dt=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},ct=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},mt=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},st=()=>{let e=document.getElementById("TableFooterItemServiceId");e!==null&&e.addEventListener("change",nt)};const ut=()=>{De(),rt(),We(),st(),Pe(),Re()};let it=()=>{z(),ut(),It()},It=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)},Lt=async()=>{await S()},jt=({inRow:e})=>{const t=e;Ft(t.ItemName),ft(t.pk),St(t.Rate)},Ft=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ft=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},St=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Vt=({inRow:e})=>{if(e.AddOnArray.length===0)return;let t=e.AddOnArray;const a=s.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),jt({inRow:e}),$(`#${a}`).modal("show")},gt=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const o=t;let r=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(r,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},yt=({inResponse:e})=>{e.status===200&&S().then(t=>{V(),$("#TableFooterItemNameId").focus()})},Ot=async({inItemSerial:e})=>{let t=bt(),a=await gt({inRowpk:t,inItemSerial:e});yt({inResponse:a})},bt=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Tt=(e,t,a)=>{a==="KS-AddOns"&&Vt({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&Ot({inItemSerial:e.pk})};let pt=()=>{},At=({inFindColumn:e})=>{e.formatter=vt},vt=(e,t,a)=>a+1;const $t=({inFindColumn:e})=>{e.formatter=ht},ht=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const l=a.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${l}</a>`}return"No"};let Ct=({inFindColumn:e})=>{e.formatter=Nt};function Nt(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let Bt=({inFindColumn:e})=>{e.formatter=Rt,e.footerFormatter=Et};function Rt(e,t,a){let l=localStorage.getItem("PresentOrder"),o=JSON.parse(l),r=t.ItemSerial,n=Object.values(o.AddOnData).filter(c=>c.AddOnItemSerial===r);return n.length>0?n.map(u=>u.AddOnRate).reduce((u,d)=>u+d,0)*t.Pcs+t.Total:t.Total}function Et(e){return this.field,"â‚¹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let wt=({inFindColumn:e})=>{e.footerFormatter=""},Dt=({inFindColumn:e})=>{e.footerFormatter=Kt};function Kt(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,o){return l+o},0).toFixed(0)}let Mt=({inFindColumn:e})=>{e.formatter=Ht},Ht=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),Pt=({inColumns:e})=>{let t=e,a=t.find(d=>d.field==="KS-Serial");t.find(d=>d.field==="Rate");let l=t.find(d=>d.field==="KS-AddOns"),o=t.find(d=>d.field==="KS-Opts"),r=t.find(d=>d.field==="KS-Amount"),n=t.find(d=>d.field==="Category");t.find(d=>d.field==="ItemName");let c=t.find(d=>d.field==="Pcs");t.find(d=>d.field==="location");let u=t.find(d=>d.field==="DeliveryDateTime");t.find(d=>d.field==="ItemService"),a!==void 0&&At({inFindColumn:a}),l!==void 0&&$t({inFindColumn:l}),o!==void 0&&Ct({inFindColumn:o}),r!==void 0&&Bt({inFindColumn:r}),n!==void 0&&wt({inFindColumn:n}),c!==void 0&&Dt({inFindColumn:c}),u!==void 0&&Mt({inFindColumn:u})};const Jt=(e,t)=>e.ItemService==="PW"?{classes:"table-warning"}:{},kt=[],Ut="true",xt=[{field:"KS-Serial",title:"#",width:5,widthUnit:"%"},{field:"Category",title:"Category",width:10,widthUnit:"%",visible:!1},{field:"ItemName",title:"Item Name",width:10,widthUnit:"%"},{field:"ItemService",title:"Service",width:10,widthUnit:"%"},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",footerFormatter:"",width:10,widthUnit:"%"},{field:"Pcs",title:"Pcs",align:"right",width:8,widthUnit:"%"},{field:"KS-Amount",title:"Amount",align:"right",footerFormatter:"",width:15,widthUnit:"%"},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:10,widthUnit:"%"},{field:"KS-Opts",title:"",width:100}],qt="",Gt="",L={data:kt,showFooter:Ut,columns:xt,onPostBody:qt,onClickRow:Gt},Wt=()=>{var e=$("#table");L.onPostBody=pt,L.onClickRow=Tt,L.rowStyle=Jt,Pt({inColumns:L.columns}),e.bootstrapTable(L)};let _t=({inRow:e})=>{const t=e;zt(t.ItemName),Qt(t.pk),Xt(t.Rate)},zt=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Qt=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Xt=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Yt=({inRow:e})=>{let t=Zt({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),_t({inRow:e}),$("#AddOnModal").modal("show")};let Zt=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>F(j({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const ea=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const o=t;let r=ta(),n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",r).replace(":AddOnKey",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})};let ta=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const aa=({inResponse:e})=>{e.status===200&&(la("AddOnModal"),S().then(t=>{V(),$("#TableFooterItemNameId").focus()}))};function la(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const oa=async({inItemSerial:e})=>{let t=ra(),a=await ea({inRowpk:t,inItemSerial:e});aa({inResponse:a})},ra=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},na=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&Yt({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&oa({inItemSerial:e.AddOnService})};let da=({inFindColumn:e})=>{e.formatter=ca},ca=(e,t,a)=>a+1,ma=({inFindColumn:e})=>{e.formatter=sa};function sa(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let ua=({inFindColumn:e})=>{e.footerFormatter=ia};function ia(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,o){return l+o},0).toFixed(2)}let Ia=({inColumns:e})=>{let t=e,a=t.find(r=>r.field==="KS-Serial"),l=t.find(r=>r.field==="KS-Opts"),o=t.find(r=>r.field==="AddOnRate");a!==void 0&&da({inFindColumn:a}),l!==void 0&&ma({inFindColumn:l}),o!==void 0&&ua({inFindColumn:o})};const La=[],ja=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"",width:100}],Fa="",g={data:La,columns:ja,onClickRow:Fa},fa="AddOnTable",Sa=()=>{var e=$(`#${fa}`);g.onClickRow=na,Ia({inColumns:g.columns}),e.bootstrapTable(g)};let Va=({inRow:e})=>{const t=e;ga(t.ItemName),ya(t.pk),Oa(t.Rate)},ga=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ya=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Oa=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const ba=({inRow:e})=>{let t=Ta({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),Va({inRow:e}),$("#AddOnModal").modal("show")};let Ta=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>F(j({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const pa=({inRowIndex:e})=>{va({inRowIndex:e}),O(),Aa()};let Aa=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const va=({inRowIndex:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},$a=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&ba({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;pa({inRowIndex:parseInt(l)})}},ha=()=>{let e=Na(),t=Ca(),a=Ba(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let Ca=()=>{let t=document.getElementById("AddOnRateId");return t===null||t.value.trim()===""?0:t.value.trim()},Na=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Ba=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const Ra=()=>{const e=ha();Ea({inAddOnRow:e})},Ea=({inAddOnRow:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},B=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},wa=({inAddOnService:e})=>B().find(l=>l.AddOnService===e)===void 0;let Da=()=>{const e=Ka();return wa({inAddOnService:e})},Ka=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()};const Ma=()=>{const e=Da();console.log(" : ",e),e?(Ra(),O(),Ha()):Pa()};let Ha=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const Pa=()=>{const e=document.getElementById("TableFooterAddOnSelectId");e.classList.add("is-invalid"),e.addEventListener("click",()=>e.classList.remove("is-invalid"))};let Ja=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",Ma)};const ka=()=>{let e=s.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Ua=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=ka();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},xa="AddOns",qa=()=>{const e=event.currentTarget,t=Wa({inAddOnData:e.value});_a(t)},Ga=()=>{const e=localStorage.getItem(xa);return JSON.parse(e)},Wa=({inAddOnData:e})=>{const a=Ga().find(l=>l.AddOnService===e);return a===void 0?0:a.AddOnRate};let _a=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const za=e=>{e.currentTarget,e.key==="Enter"&&Qa()};let Qa=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},Xa=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",qa),e!==null&&e.addEventListener("keypress",za)},Ya=()=>{Ja(),Ua(),Xa(),Za(),$("#TableFooterItemNameId").focus()},Za=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},el=({inFindColumn:e})=>{e.formatter=tl},tl=(e,t,a)=>a+1,al=({inFindColumn:e})=>{e.footerFormatter=ll},ll=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,ol=({inFindColumn:e})=>{e.formatter=rl,e.footerFormatter=nl};function rl(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const nl=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let dl=({inFindColumn:e})=>{e.footerFormatter=cl};const cl=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let ml=({inColumns:e})=>{let t=e,a=t.find(n=>n.field==="KS-Serial"),l=t.find(n=>n.field==="KS-Opts"),o=t.find(n=>n.field==="AddOnService"),r=t.find(n=>n.field==="AddOnRate");a!==void 0&&el({inFindColumn:a}),l!==void 0&&ol({inFindColumn:l}),o!==void 0&&dl({inFindColumn:o}),r!==void 0&&al({inFindColumn:r})};const sl=[],ul=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],il="",Il="",f={data:sl,columns:ul,onPostBody:il,onClickRow:Il},Ll="AddOnModalLocalStorage",jl=()=>{let t=document.getElementById(Ll).querySelector("table");var a=$(t);f.onPostBody=Ya,f.onClickRow=$a,ml({inColumns:f.columns}),a.bootstrapTable(f)},Fl=()=>{Wt(),Sa(),jl()},fl=async()=>{$e(),Fl(),await Lt(),it()},Sl=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},Vl=()=>{let e=Sl();bl(e.CustomerData.CustomerMobile),Ol(e.CustomerData.CustomerName),yl(e.pk),gl(localStorage.getItem("BranchName"))};let gl=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},yl=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},Ol=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},bl=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const v=()=>{V(),Vl()},Tl=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey;B()===null&&localStorage.setItem(e,JSON.stringify([]))},pl=async()=>{await fl(),M({inSuccessFunc:v})&&(Tl(),v())};pl().then();
