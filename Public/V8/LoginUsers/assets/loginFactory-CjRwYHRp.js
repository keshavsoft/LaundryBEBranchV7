import"./style-BQXEPnVk.js";const c="POST",d={Accept:"application/json","Content-Type":"application/json"},u={UserName:"",Password:""},n={method:c,headers:d,body:u};let i=()=>(n.body.UserName=m(),n.body.Password=y(),n.body=JSON.stringify(n.body),n),m=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},y=()=>{let t=document.getElementById("yourPassword");if(t!==null)return t.value.trim()};const g="/Login/bin/Factory/UsingJwt/CreateToken",L={PostUrl:g};let F=async()=>{let e=L.PostUrl,t=i();return await await fetch(e,t)},h=e=>{document.getElementById("yourUsername").addEventListener("input",l),document.getElementById("yourPassword").addEventListener("input",l);let o=document.getElementById("FormId").querySelectorAll("[required]"),a=!0;return o.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),a=!1;return}}),a};const l=e=>{const t=e.target;t.classList.remove("is-invalid");const o=document.getElementById(`${t.id}TextId`);o&&(o.innerHTML="")},I="/Laundry/Factory/Inward/FromBranch/FromBranchVoucher/FactoryMenu.html",U={RedirectToUrl:I},S="FactoryName",p=()=>{const e=f("KSFactoryToken");if(e){const t=j(e);t&&(console.log(t),localStorage.setItem(S,t.Factory),localStorage.setItem("UserName",t.UserName),localStorage.setItem("UserUuId",t.UserUuId),window.location.href=U.RedirectToUrl)}},f=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null},j=e=>{try{const[t,o,a]=e.split(".");return JSON.parse(atob(o))}catch(t){return console.error("Error decoding JWT payload:",t),null}},w=e=>{e.KReason.includes("Wrong Password")&&$(e.KReason),e.KReason.includes("Wrong Username")&&T(e.KReason)};let T=e=>{const t="yourUsername",o="usernameTextId",a=document.getElementById(t),r=document.getElementById(o);r.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},$=e=>{const t="yourPassword",o="passwordTextId",a=document.getElementById(t),r=document.getElementById(o);r.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},E=async e=>{switch(e.status){case 200:p();break;case 401:w(await e.json());break;default:console.error(`Unhandled status code: ${e.status}`)}},v=async e=>{if(e.preventDefault(),h()){let o=await F();E(o)}},V=()=>{let e=document.getElementById("loginButtonId");e!==null&&e.addEventListener("click",v)},P=()=>{V()};const B=()=>{k(),b()};let k=()=>{let e="KSFactoryToken";document.cookie=`${e}=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;`},b=()=>{localStorage.clear()};const C=()=>{B(),P()},K=()=>{C()};K();
