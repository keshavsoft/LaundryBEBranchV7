var J=Object.defineProperty,U=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(e,t,a)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))q.call(t,a)&&B(e,a,t[a]);if(C)for(var a of C(t))W.call(t,a)&&B(e,a,t[a]);return e},S=(e,t)=>U(e,x(t));import{S as G}from"./EntryFile-D68kwv0T.js";import{C as p}from"./Config-kioEcG-G.js";let _=()=>{Y()},Y=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=z(),l=Q();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},z=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},Q=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},X=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",_)};const Z=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let ee=()=>{Z()&&te()},te=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=ae();t.searchParams.append("OrderNumber",a),window.location.href=t.href},ae=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},le=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",ee)},oe=()=>{X(),le()},re=()=>!(ne()===!1||de()===!1||ce()===!1||me()===!1||se()===!1||ue()===!1);const ne=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},de=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ce=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},me=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},se=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ue=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ie="POST",ie={Accept:"application/json","Content-Type":"application/json"},Le="",h={method:Ie,headers:ie,body:Le},je="binV4",Fe="Transactions",fe="Kakinada",Se={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},ye={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId/:AddOnKey",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId",AlterGetUrl:"/Custom/Cleaning/Branch/Order/SubTable/ItemsInOrder/:Id/:SubId/$tableName"}},Ve={AddOnModal:"AddOnModal"},i={routePath:je,folderName:Fe,tableName:fe,localStorageKeys:Se,ApiUrls:ye,ModalIds:Ve};let ge=({inCategory:e,inItemType:t})=>{let a=i.localStorageKeys.ItemNamesKey,l=localStorage.getItem(a);return JSON.parse(l).filter(c=>c.Category===e&&c.ItemType===t)},T=({inCategory:e,inItemType:t,inService:a})=>{let l=i.localStorageKeys.ItemNamesKey,o=localStorage.getItem(l);return JSON.parse(o).find(m=>m.Category===e&&m.ItemType===t&&m.Service===a)},V=()=>{let e=i.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const be=()=>{let e=Te(),t=Oe(),a=ve(),l=$e(),o=Be(),r=Ae(),c=Ce();const m=pe();localStorage.setItem("DeliveryDateTime",JSON.stringify(c));let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const n=T({inCategory:e,inItemType:t,inService:m});let d={};return d.Category=e,d.ItemName=n.ItemName,d.ItemType=t,d.Rate=a,d.Pcs=l,d.Total=o,d.location=r,d.DeliveryDateTime=c,d.ItemService=m,d.AddOnArray=u,d};let pe=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},Te=()=>document.getElementById("ItemTypeLabelId").dataset.itemCategory,Oe=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},ve=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},$e=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},Ae=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Ce=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Be=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId"),o=JSON.parse(localStorage.getItem("PresentOrderAddOns")),r=o!==null?o.map(m=>m.AddOnRate).reduce((m,u)=>m+parseInt(u),0):0,c=parseInt(t.value)+r;return console.log("Total:",c*l.value),c*l.value},he=()=>(h.body=JSON.stringify(be()),h),Ne=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=he(),l=`/${p.routePath}/${e}/SubTableOnObj/Insert/AsIs/${t}/ItemsInOrder`;return await await fetch(l,a)},j=async()=>{let e=localStorage.getItem("BranchName"),t=p.localStorageKeys.OrderKey,a=`/${p.routePath}/${e}/Read/MaxRow`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))};const Ee=()=>{let e=i.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return He({inItemsObject:a.ItemsInOrder})},He=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>S(f({},l),{pk:a})),F=()=>{let e=Ee();var t=$("#table");t.bootstrapTable("load",e)};let Re=()=>{De(),O()},De=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const O=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),o=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var r=String(e.getDate()).padStart(2,"0"),c=String(e.getMonth()+1).padStart(2,"0"),m=e.getFullYear(),u=m+"-"+c+"-"+r,n=document.getElementById("TableFooterdateInputId");if(n.setAttribute("min",o),n){n.setAttribute("min",o);const d=JSON.parse(localStorage.getItem("DeliveryDateTime"));d?n.value=d:n.value=u}};let we=()=>{j().then(()=>{F(),localStorage.removeItem("PresentOrderAddOns"),$("#table").bootstrapTable("refresh"),$("#AddItemsId")[0].reset(),$("#TableFooterItemNameId").focus(),O(),localStorage.setItem("PresentOrderAddOns",JSON.stringify([]))})},Me=async()=>{(await Ne()).status===200&&we()};const Ke=()=>{re()&&Me()};let Pe=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",Ke)};const K="TableFooterItemServiceId",ke=e=>{let a=e.currentTarget.value;const l=Je();let o=document.getElementById(K),r=ge({inCategory:l,inItemType:a});const c=Object.groupBy(r,({Service:I})=>I);let n=Object.keys(c).map(I=>I).sort((I,g)=>I==g?0:I>g?1:-1).sort((I,g)=>I==="DW"?-1:0);for(var d="",s=0;s<n.length;s++)d+=`<option value="${n[s]}">${n[s]}</option>`;o.innerHTML=d,Ue()};let Je=()=>document.getElementById("ItemTypeLabelId").dataset.itemCategory,Ue=()=>{var e=new Event("change");let t=document.getElementById(K);t!==null&&t.dispatchEvent(e)},xe=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",ke)};const N=(e,t,a)=>{qe(e.ItemName),We(e.Category),Ge(e.DryWashRate),_e(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let qe=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},We=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Ge=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},_e=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const Ye=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:jFLocalFromLocalStorageWithFilter(e),onClickRow:N}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:jFLocalFromLocalStorage(),onClickRow:N}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},ze=()=>{let e=document.getElementById("TableFooterItemNameId").value;Ye(e)};let Qe=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",ze)},v=document.getElementById("AddOnModalLocalStorage"),Xe=({inRow:e})=>{const t=Ze(),a=et(),l=tt();at(t),lt(a),ot(l)},Ze=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},et=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},tt=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},at=e=>{const t=v.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},lt=e=>{const t=v.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)},ot=e=>{const t=v.querySelector(".AddOnModalLocalStorageSerialClass");t!==null&&(t.value=e)};const rt=()=>{let e=i.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},nt="AddOnModalLocalStorageTable",A=()=>{let e=rt();var t=$(`#${nt}`);t.bootstrapTable("load",e===null?[]:e)},dt="AddOnModalLocalStorage",ct=({inRow:e})=>{A();let t=document.getElementById(dt);Xe({inRow:e}),$(t).modal("show")};let mt=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",ct)};const st=e=>{let a=e.currentTarget.value;debugger;const l=It(),o=ut();let r=T({inCategory:l,inItemType:o,inService:a});it(r.DryWashRate)};let ut=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},It=()=>document.getElementById("ItemTypeLabelId").dataset.itemCategory,it=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},Lt=()=>{let e=document.getElementById("TableFooterItemServiceId");e!==null&&e.addEventListener("change",st)},jt=()=>!(Ft()===!1||ft()===!1||St()===!1||yt()===!1||Vt()===!1||gt()===!1);const Ft=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ft=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},St=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},yt=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Vt=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},gt=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},bt="PUT",pt={Accept:"application/json","Content-Type":"application/json"},Tt="",E={method:bt,headers:pt,body:Tt},Ot=()=>{let e=$t(),t=At(),a=Ct(),l=Bt(),o=Et(),r=ht(),c=Nt();const m=vt();localStorage.setItem("DeliveryDateTime",JSON.stringify(c));let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const n=T({inCategory:e,inItemType:t,inService:m});let d={};return d.Category=e,d.ItemName=n.ItemName,d.ItemType=t,d.Rate=a,d.Pcs=l,d.Total=o,d.location=r,d.DeliveryDateTime=c,d.ItemService=m,d.AddOnArray=u,d};let vt=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},$t=()=>{let e=Array.from(document.querySelectorAll(".CategoryItems")).find(t=>t.classList.contains("btn-primary"));return e?e.textContent.trim():null},At=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ct=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Bt=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},ht=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Nt=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Et=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId"),o=JSON.parse(localStorage.getItem("PresentOrderAddOns")),r=o!==null?o.map(m=>m.AddOnRate).reduce((m,u)=>m+parseInt(u),0):0,c=parseInt(t.value)+r;return console.log("Total:",c*l.value),c*l.value},Ht=()=>(E.body=JSON.stringify(Ot()),E),Rt=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=parseInt(document.getElementById("SubId").innerHTML),l=Ht(),o=`/Custom/Cleaning/Branch/Order/SubTable/ItemsInOrder/${t}/${a}/${e}`;return await await fetch(o,l)},Dt=()=>{j().then(()=>{F(),localStorage.removeItem("PresentOrderAddOns"),$("#table").bootstrapTable("refresh"),$("#AddItemsId")[0].reset(),$("#TableFooterItemNameId").focus(),O(),localStorage.setItem("PresentOrderAddOns",JSON.stringify([])),Pt(),wt(),Mt(),Kt()})},wt=()=>{document.getElementById("SubId").classList.add("d-none")};const Mt=()=>{document.getElementById("TableFooterSaveButtonId").classList.remove("d-none")};let Kt=()=>{document.getElementById("TableFooterAlterButtonId").classList.add("d-none")};const Pt=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)};let kt=async()=>{(await Rt()).status===200&&Dt()};const Jt=()=>{jt()&&kt()};let Ut=()=>{let e=document.getElementById("TableFooterAlterButtonId");e!==null&&e.addEventListener("click",Jt)};const xt=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=V().filter(s=>s.Category===l);const c=Object.groupBy(r,({ItemType:s})=>s);let u=Object.keys(c).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var n="",d=0;d<u.length;d++)n+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=n,document.getElementById("TableFooterItemNameId").focus()},H="Men";let qt=e=>{xt({inCategorySelected:H});let t=document.getElementById("ItemTypeLabelId");t.dataset.itemCategory=H,Wt(e),Gt()};const Wt=e=>{document.querySelectorAll(".CategoryItems").forEach(a=>{a!==e.target&&(a.classList.remove("btn","btn-primary"),a.classList.add("btn","btn-outline-primary"))}),e.target.classList.remove("btn-outline-primary"),e.target.classList.add("btn-primary")},Gt=()=>{const e=document.getElementById("ItemTypeLabelId");e.innerHTML="",e.innerHTML=`<strong>${e.dataset.itemCategory}</strong>-Item Type`};let _t=()=>{let e=document.getElementById("MenCategoryId");e!==null&&e.addEventListener("click",qt)};const Yt=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=V().filter(s=>s.Category===l);const c=Object.groupBy(r,({ItemType:s})=>s);let u=Object.keys(c).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var n="",d=0;d<u.length;d++)n+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=n,document.getElementById("TableFooterItemNameId").focus()},R="Women";let zt=e=>{Yt({inCategorySelected:R});let t=document.getElementById("ItemTypeLabelId");t.dataset.itemCategory=R,Qt(e),Xt()};const Qt=e=>{document.querySelectorAll(".CategoryItems").forEach(a=>{a!==e.target&&(a.classList.remove("btn","btn-primary"),a.classList.add("btn","btn-outline-primary"))}),e.target.classList.remove("btn-outline-primary"),e.target.classList.add("btn-primary")},Xt=()=>{const e=document.getElementById("ItemTypeLabelId");e.innerHTML="",e.innerHTML=`<strong>${e.dataset.itemCategory}</strong>-Item Type`};let Zt=()=>{let e=document.getElementById("WomenCategoryId");e!==null&&e.addEventListener("click",zt)};const ea=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=V().filter(s=>s.Category===l);const c=Object.groupBy(r,({ItemType:s})=>s);let u=Object.keys(c).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var n="",d=0;d<u.length;d++)n+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=n,document.getElementById("TableFooterItemNameId").focus()},D="Kids";let ta=e=>{ea({inCategorySelected:D});let t=document.getElementById("ItemTypeLabelId");t.dataset.itemCategory=D,aa(e),la()};const aa=e=>{document.querySelectorAll(".CategoryItems").forEach(a=>{a!==e.target&&(a.classList.remove("btn","btn-primary"),a.classList.add("btn","btn-outline-primary"))}),e.target.classList.remove("btn-outline-primary"),e.target.classList.add("btn-primary")},la=()=>{const e=document.getElementById("ItemTypeLabelId");e.innerHTML="",e.innerHTML=`<strong>${e.dataset.itemCategory}</strong>-Item Type`};let oa=()=>{let e=document.getElementById("KidsCategoryId");e!==null&&e.addEventListener("click",ta)};const ra=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=V().filter(s=>s.Category===l);const c=Object.groupBy(r,({ItemType:s})=>s);let u=Object.keys(c).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var n="",d=0;d<u.length;d++)n+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=n,document.getElementById("TableFooterItemNameId").focus()},w="Others";let na=e=>{ra({inCategorySelected:w});let t=document.getElementById("ItemTypeLabelId");t.dataset.itemCategory=w,da(e),ca()};const da=e=>{document.querySelectorAll(".CategoryItems").forEach(a=>{a!==e.target&&(a.classList.remove("btn","btn-primary"),a.classList.add("btn","btn-outline-primary"))}),e.target.classList.remove("btn-outline-primary"),e.target.classList.add("btn-primary")},ca=()=>{const e=document.getElementById("ItemTypeLabelId");e.innerHTML="",e.innerHTML=`<strong>${e.dataset.itemCategory}</strong>-Item Type`};let ma=()=>{let e=document.getElementById("OthersCategoryId");e!==null&&e.addEventListener("click",na)};const sa=()=>{_t(),Zt(),oa(),ma()},ua=()=>{sa(),mt(),Qe(),Lt(),xe(),Pe(),Ut()};let Ia=()=>{oe(),ua()},ia=async()=>{await j()},La=({inRow:e})=>{const t=e;ja(t.ItemName),Fa(t.pk),fa(t.Rate)},ja=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Fa=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},fa=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Sa=({inRow:e})=>{if(e.AddOnArray.length===0)return;let t=e.AddOnArray;const a=i.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),La({inRow:e}),$(`#${a}`).modal("show")},ya=async({inRowpk:e,inItemSerial:t})=>{const a=i.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const o=t;let r=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(r,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},Va=({inResponse:e})=>{e.status===200&&j().then(t=>{F(),$("#TableFooterItemNameId").focus()})},ga=async({inItemSerial:e})=>{let t=ba(),a=await ya({inRowpk:t,inItemSerial:e});Va({inResponse:a})},ba=()=>{let e=i.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},pa=async({inRowpk:e,inItemSerial:t})=>{const a=i.ApiUrls.ItemsTable.AlterGetUrl;let l=localStorage.getItem("BranchName");const o=t;let r=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(r)},Ta=e=>{let a=JSON.parse(localStorage.getItem("ItemNames")).find(l=>l.ItemName==e.ItemName);Oa({inValue:e.Category}),va({inValue:a.ItemType}),$a({inValue:e.ItemService}),Aa({inValue:e.Rate}),Ca({inValue:e.Pcs}),Ba({inValue:e.location}),ha({inValue:e.DeliveryDateTime}),Na({inValue:e.SubKey}),Ea(),Ha(),localStorage.setItem("PresentOrderAddOns",JSON.stringify(e.AddOnArray))};let Oa=({inValue:e})=>{let t=Array.from(document.querySelectorAll(".CategoryItems")).find(a=>a.textContent.trim()===e);t&&t.click()},va=({inValue:e})=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},$a=({inValue:e})=>{let a=document.getElementById("TableFooterItemServiceId");a!==null&&(a.value=e)},Aa=({inValue:e})=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},Ca=({inValue:e})=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)},Ba=({inValue:e})=>{let a=document.getElementById("TableFooterFactoryInputId");a!==null&&(a.value=e)},ha=({inValue:e})=>{let a=document.getElementById("TableFooterdateInputId");a!==null&&(a.value=e)},Na=({inValue:e})=>{let a=document.getElementById("SubId");a.classList.remove("d-none"),a!==null&&(a.innerHTML=e),e===void 0&&(a.innerHTML=0)};const Ea=()=>{document.getElementById("TableFooterSaveButtonId").classList.add("d-none")};let Ha=()=>{document.getElementById("TableFooterAlterButtonId").classList.remove("d-none")};const Ra=async({inResponse:e})=>{e.status===200&&Ta(await e.json())},Da=async({inItemSerial:e})=>{let t=wa(),a=await pa({inRowpk:t,inItemSerial:e});Ra({inResponse:a})},wa=()=>{let e=i.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Ma=(e,t,a)=>{a==="KS-AddOns"&&Sa({inRow:e}),a==="KS-Opts"&&Swal.fire({title:"Check",text:"Do you really want to Delete Item?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Edit",denyButtonText:"Delete"}).then(l=>{l.isConfirmed?Da({inItemSerial:e.pk}):l.isDenied&&ga({inItemSerial:e.pk})})};let Ka=()=>{},Pa=({inFindColumn:e})=>{e.formatter=ka},ka=(e,t,a)=>a+1;const Ja=({inFindColumn:e})=>{e.formatter=Ua},Ua=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const l=a.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${l}</a>`}return"No"};let xa=({inFindColumn:e})=>{e.formatter=qa};function qa(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let Wa=({inFindColumn:e})=>{e.formatter=Ga,e.footerFormatter=_a};function Ga(e,t,a){let l=localStorage.getItem("PresentOrder"),o=JSON.parse(l),r=t.ItemSerial,c=Object.values(o.AddOnData).filter(m=>m.AddOnItemSerial===r);return c.length>0?c.map(u=>u.AddOnRate).reduce((u,n)=>u+n,0)*t.Pcs+t.Total:t.Total}function _a(e){return this.field,"â‚¹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let Ya=({inFindColumn:e})=>{e.footerFormatter=""},za=({inFindColumn:e})=>{e.footerFormatter=Qa};function Qa(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,o){return l+o},0).toFixed(0)}let Xa=({inFindColumn:e})=>{e.formatter=Za},Za=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),el=({inColumns:e})=>{let t=e,a=t.find(n=>n.field==="KS-Serial");t.find(n=>n.field==="Rate");let l=t.find(n=>n.field==="KS-AddOns"),o=t.find(n=>n.field==="KS-Opts"),r=t.find(n=>n.field==="KS-Amount"),c=t.find(n=>n.field==="Category");t.find(n=>n.field==="ItemName");let m=t.find(n=>n.field==="Pcs");t.find(n=>n.field==="location");let u=t.find(n=>n.field==="DeliveryDateTime");t.find(n=>n.field==="ItemService"),a!==void 0&&Pa({inFindColumn:a}),l!==void 0&&Ja({inFindColumn:l}),o!==void 0&&xa({inFindColumn:o}),r!==void 0&&Wa({inFindColumn:r}),c!==void 0&&Ya({inFindColumn:c}),m!==void 0&&za({inFindColumn:m}),u!==void 0&&Xa({inFindColumn:u})};const tl=(e,t)=>e.ItemService==="PW"?{classes:"table-warning"}:{},al=[],ll="true",ol=[{field:"KS-Serial",title:"#",width:5,widthUnit:"%"},{field:"Category",title:"Category",width:10,widthUnit:"%",visible:!1},{field:"ItemName",title:"Item Name",width:10,widthUnit:"%"},{field:"ItemService",title:"Service",width:10,widthUnit:"%"},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",footerFormatter:"",width:10,widthUnit:"%"},{field:"Pcs",title:"Pcs",align:"right",width:8,widthUnit:"%"},{field:"KS-Amount",title:"Amount",align:"right",footerFormatter:"",width:15,widthUnit:"%"},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:10,widthUnit:"%"},{field:"KS-Opts",title:"",width:100}],rl="",nl="",L={data:al,showFooter:ll,columns:ol,onPostBody:rl,onClickRow:nl},dl=()=>{var e=$("#table");L.onPostBody=Ka,L.onClickRow=Ma,L.rowStyle=tl,el({inColumns:L.columns}),e.bootstrapTable(L)};let cl=({inRow:e})=>{const t=e;ml(t.ItemName),sl(t.pk),ul(t.Rate)},ml=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},sl=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},ul=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Il=({inRow:e})=>{let t=il({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),cl({inRow:e}),$("#AddOnModal").modal("show")};let il=({inItemSerial:e})=>{let t=i.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(m=>S(f({},l.AddOnData[m]),{AddOnPK:m})).filter(m=>m.AddOnItemSerial===o)};const Ll=async({inRowpk:e,inItemSerial:t})=>{const a=i.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const o=t;let r=jl(),c=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",r).replace(":AddOnKey",o);return await fetch(c,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})};let jl=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const Fl=({inResponse:e})=>{e.status===200&&(fl("AddOnModal"),j().then(t=>{F(),$("#TableFooterItemNameId").focus()}))};function fl(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const Sl=async({inItemSerial:e})=>{let t=yl(),a=await Ll({inRowpk:t,inItemSerial:e});Fl({inResponse:a})},yl=()=>{let e=i.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Vl=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&Il({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&Sl({inItemSerial:e.AddOnService})};let gl=({inFindColumn:e})=>{e.formatter=bl},bl=(e,t,a)=>a+1,pl=({inFindColumn:e})=>{e.formatter=Tl};function Tl(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let Ol=({inFindColumn:e})=>{e.footerFormatter=vl};function vl(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,o){return l+o},0).toFixed(2)}let $l=({inColumns:e})=>{let t=e,a=t.find(r=>r.field==="KS-Serial"),l=t.find(r=>r.field==="KS-Opts"),o=t.find(r=>r.field==="AddOnRate");a!==void 0&&gl({inFindColumn:a}),l!==void 0&&pl({inFindColumn:l}),o!==void 0&&Ol({inFindColumn:o})};const Al=[],Cl=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"",width:100}],Bl="",b={data:Al,columns:Cl,onClickRow:Bl},hl="AddOnTable",Nl=()=>{var e=$(`#${hl}`);b.onClickRow=Vl,$l({inColumns:b.columns}),e.bootstrapTable(b)};let El=({inRow:e})=>{const t=e;Hl(t.ItemName),Rl(t.pk),Dl(t.Rate)},Hl=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Rl=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Dl=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const P=()=>{let e=i.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},wl=({inAddOnService:e})=>P().find(l=>l.AddOnService===e)===void 0,k=()=>{if(!Ml())return!1;const e=Kl();return wl({inAddOnService:e})!==!1},Ml=()=>{const e=document.getElementById("TableFooterAddOnSelectId");return e.value.trim()?(e.classList.remove("is-invalid"),!0):(e.classList.add("is-invalid"),e.focus(),!1)},Kl=()=>{const e=document.getElementById("TableFooterAddOnSelectId");return e?e.value.trim():void 0},Pl=({inRow:e})=>{k();let t=kl({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),El({inRow:e}),$("#AddOnModal").modal("show")};let kl=({inItemSerial:e})=>{let t=i.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(m=>S(f({},l.AddOnData[m]),{AddOnPK:m})).filter(m=>m.AddOnItemSerial===o)};const Jl=({inRowIndex:e})=>{xl({inRowIndex:e}),A(),Ul()};let Ul=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const xl=({inRowIndex:e})=>{let t=i.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},ql=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&Pl({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;Jl({inRowIndex:parseInt(l)})}},Wl=()=>{let e=_l(),t=Gl(),a=Yl(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let Gl=()=>{let t=document.getElementById("AddOnRateId");return t===null||t.value.trim()===""?0:t.value.trim()},_l=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Yl=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const zl=()=>{const e=Wl();Ql({inAddOnRow:e})},Ql=({inAddOnRow:e})=>{let t=i.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},Xl=()=>{const e=k();console.log(" : ",e),e?(zl(),A(),Zl()):eo()};let Zl=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const eo=()=>{const e=document.getElementById("TableFooterAddOnSelectId");e.classList.add("is-invalid"),e.addEventListener("click",()=>e.classList.remove("is-invalid"))};let to=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",Xl)};const ao=()=>{let e=i.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},lo=()=>{let e=document.getElementById("TableFooterAddOnSelectId");oo(e);let t=ao();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}};let oo=e=>{let t=document.createElement("option");t.value="",t.innerHTML="Select Add-On ",e.appendChild(t)};const ro="AddOns",no=()=>{const e=event.currentTarget,t=mo({inAddOnData:e.value});so(t)},co=()=>{const e=localStorage.getItem(ro);return JSON.parse(e)},mo=({inAddOnData:e})=>{const a=co().find(l=>l.AddOnService===e);return a===void 0?0:a.AddOnRate};let so=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const uo=e=>{e.currentTarget,e.key==="Enter"&&Io()};let Io=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},io=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",no),e!==null&&e.addEventListener("keypress",uo)},Lo=()=>{to(),lo(),io(),jo(),$("#TableFooterItemNameId").focus()},jo=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},Fo=({inFindColumn:e})=>{e.formatter=fo},fo=(e,t,a)=>a+1,So=({inFindColumn:e})=>{e.footerFormatter=yo},yo=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,Vo=({inFindColumn:e})=>{e.formatter=go,e.footerFormatter=bo};function go(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const bo=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let po=({inFindColumn:e})=>{e.footerFormatter=To};const To=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let Oo=({inColumns:e})=>{let t=e,a=t.find(c=>c.field==="KS-Serial"),l=t.find(c=>c.field==="KS-Opts"),o=t.find(c=>c.field==="AddOnService"),r=t.find(c=>c.field==="AddOnRate");a!==void 0&&Fo({inFindColumn:a}),l!==void 0&&Vo({inFindColumn:l}),o!==void 0&&po({inFindColumn:o}),r!==void 0&&So({inFindColumn:r})};const vo=[],$o=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],Ao="",Co="",y={data:vo,columns:$o,onPostBody:Ao,onClickRow:Co},Bo="AddOnModalLocalStorage",ho=()=>{let t=document.getElementById(Bo).querySelector("table");var a=$(t);y.onPostBody=Lo,y.onClickRow=ql,Oo({inColumns:y.columns}),a.bootstrapTable(y)},No=()=>{dl(),Nl(),ho()},Eo=async()=>{Re(),No(),await ia(),Ia()},Ho=()=>{debugger;let e=i.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},Ro=()=>{let e=Ho();Ko(e.CustomerData.CustomerMobile),Mo(e.CustomerData.CustomerName),wo(e.pk),Do(localStorage.getItem("BranchName"))};let Do=e=>{let a=document.getElementById("BranchNameAnchorId"),l=e.replace("BranOrders","");a!==null&&(a.innerHTML=l)},wo=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},Mo=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},Ko=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const M=()=>{F(),Ro()},Po=()=>{let e=i.localStorageKeys.PresentOrderAddOnsKey;P()===null&&localStorage.setItem(e,JSON.stringify([]))},ko=async()=>{await Eo(),G({inSuccessFunc:M})&&(Po(),M(),Jo())};let Jo=()=>{let e=document.getElementById("MenCategoryId");e!==null&&e.click()};ko().then();
